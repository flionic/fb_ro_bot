<!DOCTYPE html>
<!--suppress AssignmentResultUsedJS -->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Application Logs</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='log.css') }}" type="text/css">
    <link rel="shortcut icon" href="{{ url_for('static', filename='log.ico') }}">
    <meta name="author" content="Aleksey Fakhrutdinov">
    <meta name="copyright" lang="en" content="Bionic Inc">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
</head>
<body style="background-color: #fff" cz-shortcut-listen="true">
<div class="debugger">
    <h1>Application Logs</h1>
    <div class="detail">
        <p class="errormsg">Active threads: {{ threads }}</p>
    </div>
    <h2 class="traceback">{{ date }}<em> - date of log (no autoreload)</em></h2>
    <div class="plain">
        <pre id="log-str">
{{ log_text }}
        </pre>
    </div>

    <div class="footer">
        Brought to you by <strong class="arthur">DON'T PANIC</strong>, your
        friendly Werkzeug powered traceback interpreter.
    </div>
</div>
<script language="JavaScript" type="text/javascript">
    var logText = document.getElementById("log-str");
    //noinspection MagicNumberJS
    logText.scrollTop = 999999;
    window.addEventListener("load", setLogHeight);
    window.addEventListener("resize", setLogHeight);
    window.addEventListener("ondragend", setLogHeight);
    function setLogHeight() {
        logText.style.height = window.innerHeight - 5 - document.body.offsetHeight + "px";
    }
</script>
<script language="JavaScript" type="text/javascript">
    function update_values() {
            $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
            $.getJSON($SCRIPT_ROOT+"/_update_log",
                function(data) {
                    console.log(data)
                });
    }
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
<script type="text/javascript" charset="utf-8">
//    var socket = io.connect('http://' + document.domain + ':' + location.port);
//    socket.on('connect', function() {
//        socket.emit('my event', {data: 'I\'m connected!'});
//    });
</script>
</body>
</html>